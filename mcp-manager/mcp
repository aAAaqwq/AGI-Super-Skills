#!/bin/bash
# MCP Manager - å‘½ä»¤è¡Œå…¥å£

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# å¥åº·æ£€æµ‹
case "$1" in
    health)
        case "$2" in
            check)
                python3 "$SCRIPT_DIR/scripts/health_check.py" "${@:3}"
                ;;
            monitor)
                echo "ğŸ” MCP Health Monitor (Press Ctrl+C to stop)"
                echo "="
                while true; do
                    clear
                    python3 "$SCRIPT_DIR/scripts/health_check.py"
                    echo ""
                    echo "[Last check: $(date '+%Y-%m-%d %H:%M:%S')]"
                    echo "[Next check in 60 seconds...]"
                    sleep 60
                done
                ;;
            *)
                echo "Usage: mcp health <check|monitor> [options]"
                ;;
        esac
        ;;
    list)
        python3 "$SCRIPT_DIR/scripts/mcp_manager.py" list
        ;;
    show)
        python3 "$SCRIPT_DIR/scripts/mcp_manager.py" show "$2"
        ;;
    enable)
        python3 "$SCRIPT_DIR/scripts/mcp_manager.py" enable "$2"
        ;;
    disable)
        python3 "$SCRIPT_DIR/scripts/mcp_manager.py" disable "$2"
        ;;
    recommend)
        shift
        python3 "$SCRIPT_DIR/scripts/mcp_manager.py" recommend "$*"
        ;;
    help)
        cat << EOF
MCP Manager - MCP æœåŠ¡å™¨æ™ºèƒ½ç®¡ç†å·¥å…·

å‘½ä»¤ï¼š
  mcp list                          åˆ—å‡ºæ‰€æœ‰ MCP
  mcp show <name>                   æ˜¾ç¤º MCP åŠŸèƒ½
  mcp recommend <task>              ä¸ºä»»åŠ¡æ¨è MCP

  mcp health check [name]           å¥åº·æ£€æŸ¥
  mcp health monitor               æŒç»­ç›‘æ§

  mcp enable <name>                 å¯ç”¨ MCP
  mcp disable <name>                ç¦ç”¨ MCP

ç¤ºä¾‹ï¼š
  mcp list                          æŸ¥çœ‹æ‰€æœ‰ MCP
  mcp show github                   æŸ¥çœ‹ GitHub MCP åŠŸèƒ½
  mcp recommend ç½‘é¡µè‡ªåŠ¨åŒ–          æ¨èé€‚åˆçš„ MCP
  mcp health check                  æ£€æŸ¥æ‰€æœ‰ MCP çŠ¶æ€
  mcp health monitor               æŒç»­ç›‘æ§

æ–‡æ¡£ï¼š~/clawd/skills/mcp-manager/SKILL.md
EOF
        ;;
    *)
        python3 "$SCRIPT_DIR/scripts/mcp_manager.py" "$@"
        ;;
esac
